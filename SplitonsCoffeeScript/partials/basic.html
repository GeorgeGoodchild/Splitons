<div>
    <div class="section">
        <div class="container">
            <div class="row" ng-include="'partials/sections.html'"></div>

            <!--transaction level-->
            <div class="row" ng-show="activeTab == 2">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h1 ng-show="notDeletedTransactions.length > 0">{{notDeletedTransactions.length}} Transactions</h1>

                            <a href="#/project/{{projectId}}/0/transaction" class="btn btn-lg btn-primary">Add a new
                                transaction
                            </a>
                        </div>
                        <div class="panel-body">
                            <h3 ng-show="notDeletedTransactions.length == 0">No transaction recorded</h3>
                            <table class="table table-striped" ng-show="notDeletedTransactions.length > 0">
                                <thead>
                                <tr>
                                    <th>Comment</th>
                                    <th>Amount</th>
                                    <th class="hidden-xs">From</th>
                                    <th class="hidden-xs hidden-sm">To</th>
                                    <th>Edit</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="transaction in notDeletedTransactions track by $index">
                                    <!--{{transaction.lastUpdated| date:"MM/dd/yyyy 'at' h:mma"}} :-->
                                        <td>{{transaction.comment}}</td>
                                        <td>{{transaction.amount}} {{transaction.currency}}</td>
                                        <td class="hidden-xs">{{transaction.from}}</td>
                                        <td class="hidden-xs hidden-sm">{{(transaction.to).join(',')}}</td>
                                        <td>
                                            <a href="#/project/{{projectId}}/{{transaction.id}}/transaction"><i
                                                    class="fa fa-fw fa-lg fa-pencil"></i></a>
                                        </td>
                                        <td>
                                            <a ng-click="deleteTransaction(transaction.id)"><i
                                                    class="fa fa-close fa-fw fa-lg text-danger"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!--settlement level-->
            <div class="row" ng-show="activeTab == 3">

                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h1> How to settle the debts :</h1>
                        </div>
                        <div class="panel-body">
                            <h1 class="text-warning" ng-show="transactions.length == 0"> You need to add transactions
                                first</h1>

                            <div class="row">
                                <!--to refactorize!-->
                                <div ng-show="allCurrencies.length > 1"  class="col-xs-3 col-md-2">
                                    <ul class="nav nav-pills nav-stacked">
                                        <li ng-repeat="currency in allCurrencies"
                                            ng-class="selectedCurrency == currency ? 'active' : ''"
                                            ng-click="setSelectedCurrency(currency)">
                                            <a href ng-click="setSelectedCurrency(currency)">{{currency}}</a>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="col-xs-10">
                                    <ul class="lead list-unstyled">

                                        <li ng-repeat="settlement in settlements">
                                            <span>{{settlement.from}} should pay {{settlement.to}} <b>{{settlement.amount|number:2}}</b> {{settlement.currency}}</span>

                                <span class="pull-right ">
                                    <a ng-click="settleDebts(settlement.from,settlement.to,settlement.amount,settlement.currency)"><i
                                            class="fa fa-check fa-fw fa-lg text-success"></i></a>
                                    </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>